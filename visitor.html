<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart City Tourism Guide</title>
    <link rel="stylesheet" href="visitor.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" />
                    <circle cx="12" cy="10" r="3" />
                </svg>
                <span>Smart City Tourism Guide</span>
            </div>
            <div class="nav-links">
                <a href="index.html">
                    <button onclick="showSection('explore')" class="nav-btn">Explore Cities</button>
                </a>
                <a href="tempo.html">
                    <button class="nav-btn">Travel Packages</button>
                </a>
                <a href="visitor.html">
                    <button onclick="showSection('feedback')" class="nav-btn active">Visitor Feedback</button>
                </a>
                <a href="feedback.html">
                    <button class="nav-btn">Add Feedback</button>
                </a>
                <button class="nav-btn logout-btn" onclick="logoutUser()">Logout</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- Explore Cities Section -->
        <section id="explore" class="section">
            <div class="city-selector">
                <h2>Explore Cities</h2>
                <div class="city-grid" id="cityGrid"></div>
            </div>

            <div id="touristSpots" class="tourist-spots hidden">
                <h2>Tourist Spots in <span id="selectedCityName"></span></h2>
                <div class="spots-grid" id="spotsGrid"></div>
            </div>
        </section>

        <!-- Travel Packages Section -->
        <section id="packages" class="section">
            <h2>Recommended Travel Packages</h2>
            <div id="packagesGrid" class="packages-grid"></div>
        </section>

            <!-- Visitor Feedback Section -->
       <!-- Visitor Feedback Section -->
<section id="feedback" class="section active">
    <h2>Visitor Feedback</h2>
    <div class="feedback-stats" id="feedbackStats"></div>
    <div class="feedback-grid" id="feedbackGrid"></div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch("fetch_feedback.php") // Fetch feedback from PHP
            .then(response => response.json())
            .then(data => {
                const feedbackGrid = document.getElementById("feedbackGrid");
    
                if (data.length === 0) {
                    feedbackGrid.innerHTML = "<p>No feedback available yet.</p>";
                    return;
                }
    
                feedbackGrid.innerHTML = data.map(feedback => `
                    <div class="feedback-card">
                        <h3>${feedback.name}</h3>
                        <p><strong>City:</strong> ${feedback.city}</p>
                        <p><strong>Rating:</strong> ‚≠ê ${feedback.rating}</p>
                        <p><strong>Comment:</strong> ${feedback.comment}</p>
                        <p><small>${feedback.date}</small></p>
                    </div>
                `).join("");
            })
            .catch(error => console.error("Error fetching feedback:", error));
    });

    function logoutUser() {
            fetch("logout.php")
                .then(() => {
                    window.location.href = "signin.html";  // Redirect after logout
                });
        }

    </script>
    
    <!-- <script src="temp.js"></script> -->
</body>
</html>